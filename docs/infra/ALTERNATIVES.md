# Managed Service Alternatives

This register lists open-source or zero-cost (for small workloads) substitutes for the managed Cloudflare stack so we can pivot while maintaining the automation-first principles defined in [`docs/ai-instructions.md`](../ai-instructions.md). Each alternative includes integration notes covering security boundaries, data flow implications, and performance considerations.

| Cloudflare Service     | OSS / Free Substitute                                                                                                        | Rationale & Integration Notes                                                            | Security & Operations                                                                                     | Performance Budget                                                                               |
| ---------------------- | ---------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| Pages (SSG Hosting)    | **Netlify OSS CLI + Netlify Edge Functions**, or **Vercel CLI (Hobby)**                                                      | Astro build output deployable via open CLI; GitHub Actions handle automation.            | Ensure JWT-based previews and per-branch access controls; enforce IaC-managed DNS/TLS.                    | Target <100 ms TTFB via CDN configuration and keep incremental builds under 5 minutes.           |
| Workers (Edge Compute) | **Cloudflare Workers OSS Runtime (Miniflare) for self-hosting**, **Fastly Compute@Edge trial**, or **Deno Deploy Free tier** | Preserve serverless patterns with similar Request/Response APIs.                         | Harden with mTLS between edge nodes and upstream stores; centralise logging via OpenTelemetry collectors. | Keep cold starts <50 ms; steady-state median latency <80 ms globally.                            |
| D1 (SQLite)            | **Litestream + Fly.io**, **LiteFS**, or **SQLite with LiteFS Cloud**                                                         | Provide distributed SQLite with automated replication and failover.                      | Host replication control plane in private network segments; encrypt replicas at rest.                     | Achieve <200 ms global write replication lag and <100 ms query latency.                          |
| KV                     | **Redis (Valkey) with Redis Cloud Free**, **Upstash Redis Free**, or **KeyDB OSS**                                           | Offers key/value semantics with TTL and pub/sub.                                         | Deploy inside VPC with IAM-based access; require TLS + ACL tokens.                                        | Maintain <15 ms read latency at edge PoPs and <20 ms write propagation.                          |
| R2 (Object Storage)    | **MinIO Operator on Kubernetes**, **Backblaze B2 Free**, or **Wasabi trial**                                                 | S3-compatible API retains automation scripts; object lifecycle rules mirror R2 policies. | Segregate buckets per environment and enforce server-side encryption; route via CDN signed URLs.          | Keep P95 download latency <250 ms for <5 MB artefacts and ensure ingest throughput â‰¥ 100 MB/min. |
| KV/Workers Analytics   | **OpenTelemetry Collector + Grafana LGTM stack**, **Matomo (self-hosted)**                                                   | Captures metrics and behavioural analytics without vendor lock-in.                       | Deploy analytics ingestion behind authenticated edge proxies; anonymise PII before storage.               | Dashboards should refresh within 60 s; sampling keeps metrics ingestion <500 events/s.           |
| Pagefind (Search)      | **Lunr.js static index**, **Typesense Cloud Free**, or **Elastic App Search self-managed**                                   | Supports static search or minimal server footprint with similar query APIs.              | Keep search indices in read-only buckets with signed access; enforce content scanning pre-publish.        | Rebuild indices under 60 s and deliver search responses <200 ms client-side.                     |

## Operational Playbook

- Maintain Terraform modules for both Cloudflare-managed and alternative stacks so we can switch providers with a single pipeline variable.
- Validate that automated compliance scanners cover each substitute (CIS benchmarks, dependency SCA, workload policies).
- Update [`docs/architecture/DECISIONS.md`](../architecture/DECISIONS.md) whenever an alternative becomes primary so downstream teams honour the new security boundaries and performance envelopes.
