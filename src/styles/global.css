/*
  Self-host the Inter variable font via @fontsource so typography ships from our
  own origin. This satisfies CSP policies (no third-party font CDNs) while still
  delivering the variable-weight range with font-display: swap baked in.
*/
@import '@fontsource-variable/inter/index.css';

/*
  Import the design token CSS variables before Tailwind runs so every layer
  (base, components, utilities) can read the values. The Tailwind config wires
  semantic colors/spacing/typography to these variables.
*/
@import './tokens.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/*
  Centralized global styles keep cross-page UX aligned. Leverage Tailwind's
  design tokens for consistency and long-term maintainability.
*/

/*
  Documented theming strategy -------------------------------------------------
  - Tokens define light/dark palettes using `[data-theme]` selectors.
  - We expose a `data-theme="dark"` toggle on `<html>` (or any ancestor) to flip
    seamlessly without repainting the entire page.
  - Base styles below consume Tailwind utilities that read from those tokens, so
    component islands pick up updates automatically.
*/

html {
  /*
    Keep height pinned so modals/backdrops fill the viewport regardless of content and ensure
    in-page navigation relies on CSS smooth scrolling by default. Enterprise buyers routinely
    reference WCAG 2.4.1 (Bypass Blocks), so aligning the skip link with `scroll-behavior: smooth`
    keeps motion consistent across browsers that do not auto-focus hash targets.
  */
  min-height: 100%;
  scroll-behavior: smooth;
}

body {
  /*
    Tailwind's `font-sans` now resolves to a system-first stack (per config) so
    first paint is stable. Once Inter Variable loads we inherit it without
    layout shift. The background/text colors route through semantic tokens so
    theme flips happen instantly.
  */
  @apply bg-surface-base text-ink-primary font-sans antialiased;
  background-color: hsl(var(--color-surface-base));
  color: hsl(var(--color-ink-primary));
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  transition:
    background-color 180ms ease,
    color 180ms ease;
}

/*
  Motion-safety override ------------------------------------------------------
  - Honors user `prefers-reduced-motion` to meet WCAG 2.3.3 and reduce vestibular
    discomfort. We zero out transitions/animations declared above so color
    tokens (`--color-surface-base`, `--color-ink-primary`) snap instantly.
*/
@media (prefers-reduced-motion: reduce) {
  /*
    Disable smooth scrolling to avoid disorientation during skip-link jumps per WCAG 2.3.3 and
    Section 508 §1194.31. The explicit override keeps browser defaults intact for motion-sensitive
    operators reviewing observability dashboards.
  */
  html {
    scroll-behavior: auto !important;
  }

  /* Blanket override keeps legacy CSS and Tailwind utilities compliant. */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    animation-play-state: paused !important;
    scroll-behavior: auto !important;
    transition-duration: 0ms !important;
  }

  /* Body transition from above now respects the zero-duration request. */
  body {
    transition: none !important;
  }
}

/*
  Enterprise scrollbar theming ------------------------------------------------
  - Scrollbars inherit semantic tokens so dark/light modes stay in sync.
  - Thumb contrast aligns with `--color-scrollbar-thumb` (≥3:1 against track)
    while hover surfaces adopt `--color-scrollbar-thumb-hover` to highlight the
    affordance per Section 508 expectations.
*/
* {
  scrollbar-color: hsl(var(--color-scrollbar-thumb)) hsl(var(--color-scrollbar-track));
  scrollbar-width: var(--scrollbar-width-mode);
}

/* WebKit width/height derive from the shared thickness token for parity. */
*::-webkit-scrollbar {
  height: var(--size-scrollbar-thickness);
  width: var(--size-scrollbar-thickness);
}

/* Track leans on the rail token so nested themes remain consistent. */
*::-webkit-scrollbar-track {
  background-color: hsl(var(--color-scrollbar-track));
}

/* Thumb rounds to our radius scale and outlines with the base surface token. */
*::-webkit-scrollbar-thumb {
  background-clip: padding-box;
  background-color: hsl(var(--color-scrollbar-thumb));
  border: 2px solid hsl(var(--color-surface-base));
  border-radius: var(--radius-lg);
}

/* Hover state swaps to brand accent token for discoverability. */
*::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--color-scrollbar-thumb-hover));
}

/* Corner inherits rail tone so diagonal scroll containers stay neutral. */
*::-webkit-scrollbar-corner {
  background-color: hsl(var(--color-scrollbar-track));
}

body[data-theme='dark'],
html[data-theme='dark'] body {
  /* Provide an explicit hook so nested theme scopes (e.g., docs sandbox) work. */
  background-color: hsl(var(--color-surface-base));
  color: hsl(var(--color-ink-primary));
}

main {
  /*
    Center the main column and honor responsive spacing tokens for enterprise
    dashboards and marketing pages alike. The clamp-based gutters from
    `tokens.css` mean designers tweak a single value to realign the entire
    layout.
  */
  @apply gap-space-xl px-gutter-inline pb-space-3xl pt-space-2xl mx-auto flex min-h-screen max-w-5xl flex-col;
}

a {
  /*
    Link color uses the accent brand token to meet WCAG AA across themes. Focus
    states lean on the shared focus-ring shadow so the outline matches component
    controls.
  */
  @apply text-accent-brand focus-visible:outline-accent-brand font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2;
  text-decoration-color: hsl(var(--color-accent-brand));
}

a:hover {
  @apply text-accent-brand/80;
}

code {
  /* Inline code surfaces leverage raised backgrounds + inverted ink. */
  @apply rounded-radius-sm bg-surface-overlay/80 px-space-3xs text-caption text-ink-inverted shadow-elevation-1 py-[0.35rem] font-mono;
}

/*
  Radix Navigation Menu styling: we encapsulate the look-and-feel into small utility
  classes so other islands can opt into the same primitives without duplicating
  Tailwind declarations. All class names use a namespace (`navigation-*`) to avoid
  collisions with existing layout utilities.
*/

.navigation-surface {
  /* The global navigation bar references raised surfaces + blur for glassmorphism. */
  @apply gap-space-sm rounded-radius-2xl border-border-subtle/70 bg-surface-raised/70 px-space-md py-space-sm text-body-sm text-ink-secondary shadow-elevation-2 supports-[backdrop-filter]:bg-surface-raised/50 relative mx-auto flex w-full max-w-4xl items-center justify-center border backdrop-blur;
}

.navigation-list {
  @apply gap-space-lg flex flex-wrap items-center justify-center;
}

.navigation-trigger {
  @apply gap-space-3xs rounded-radius-pill px-space-lg text-ink-muted hover:text-ink-primary focus-visible:outline-accent-brand data-[state=open]:border-border-strong data-[state=open]:bg-surface-overlay/80 data-[state=open]:text-ink-primary inline-flex h-12 min-w-[3rem] items-center border border-transparent bg-transparent font-semibold transition-colors duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2;
}

.navigation-trigger__chevron {
  @apply text-ink-muted text-xs transition-transform duration-200 group-data-[state=open]:-rotate-180;
}

.navigation-content {
  @apply mt-space-sm space-y-space-sm rounded-radius-2xl border-border-subtle/80 bg-surface-overlay/95 p-space-lg text-ink-secondary shadow-elevation-3 supports-[backdrop-filter]:bg-surface-overlay/80 absolute top-full left-1/2 z-10 w-[min(36rem,90vw)] -translate-x-1/2 border text-left backdrop-blur-xl;
}

.navigation-content__description {
  @apply text-body-sm text-ink-muted;
}

.navigation-grid {
  @apply gap-space-sm pt-space-xs grid sm:grid-cols-2;
}

.navigation-grid__item {
  @apply h-full;
}

.navigation-link {
  @apply rounded-radius-xl bg-surface-base/60 px-space-md py-space-sm text-ink-secondary hover:border-accent-brand/60 hover:bg-surface-overlay/80 hover:text-ink-primary hover:shadow-elevation-1 focus-visible:outline-accent-brand block h-full space-y-[0.375rem] border border-transparent text-left transition duration-200 focus-visible:outline focus-visible:outline-2;
}

.navigation-grid__heading {
  @apply text-title-md text-ink-primary font-semibold;
}

.navigation-grid__copy {
  @apply text-body-sm text-ink-muted;
}

.navigation-indicator {
  @apply pointer-events-none absolute top-full flex h-3 items-end justify-center overflow-hidden;
}

.navigation-indicator__arrow {
  @apply rounded-radius-xs bg-surface-overlay shadow-elevation-2 h-3 w-3 rotate-45;
}

.navigation-viewport {
  @apply mt-space-sm rounded-radius-2xl pointer-events-none absolute top-full left-0 z-10 w-full border border-transparent bg-transparent opacity-0 transition-opacity duration-200 data-[state=open]:pointer-events-auto data-[state=open]:opacity-100;
}

/*
 * --------------------------------------------------------------------------
 * Ladle documentation scaffolding -----------------------------------------
 * --------------------------------------------------------------------------
 */

.ladle-story-wrapper {
  display: block;
}

.token-story {
  color: inherit;
  display: grid;
  gap: var(--space-lg);
  margin-inline: auto;
  max-width: 72rem;
}

.token-story__title {
  font-size: clamp(2rem, 3vw, 2.5rem);
  font-weight: 700;
}

.token-story__lede {
  color: var(--color-ink-secondary);
  max-width: 60ch;
}

.token-grid {
  display: grid;
  gap: var(--space-md);
  grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
}

.token-grid__item {
  background: hsl(var(--color-surface-overlay) / 60%);
  border: 1px solid hsl(var(--color-border-subtle));
  border-radius: var(--radius-lg);
  color: inherit;
  display: grid;
  gap: var(--space-sm);
  padding: var(--space-md);
}

.token-grid__item dl {
  display: grid;
  gap: 0.35rem;
}

.token-grid__item dt {
  color: var(--color-ink-secondary);
  font-weight: 600;
}

.token-grid__item dd {
  font-family:
    ui-monospace, SFMono-Regular, SFMono, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
    monospace;
  margin: 0;
}

.token-flex {
  display: grid;
  gap: var(--space-xl);
}

.token-flex--grid {
  grid-template-columns: repeat(auto-fit, minmax(18rem, 1fr));
}

.token-list {
  display: grid;
  gap: var(--space-sm);
  list-style: none;
  padding: 0;
}

.token-list__item {
  background: hsl(var(--color-surface-base) / 80%);
  border: 1px solid hsl(var(--color-border-subtle) / 70%);
  border-radius: var(--radius-lg);
  display: grid;
  gap: var(--space-2xs);
  padding: var(--space-sm);
}

.token-list__item--radius {
  align-items: center;
  gap: var(--space-sm);
  grid-template-columns: auto auto 1fr;
}

.token-list__label {
  color: var(--color-ink-primary);
  font-weight: 600;
}

.token-list__preview {
  background: linear-gradient(
    90deg,
    hsl(var(--color-accent-brand)) 0%,
    hsl(var(--color-accent-brand) / 20%) 100%
  );
  border-radius: var(--radius-pill);
  height: 0.25rem;
}

.token-list__radius {
  background: hsl(var(--color-surface-overlay));
  border: 1px dashed hsl(var(--color-border-subtle));
  height: 2.5rem;
  width: 3.5rem;
}

.token-shadow {
  display: grid;
  gap: var(--space-md);
}

.token-shadow__grid {
  display: grid;
  gap: var(--space-md);
  grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
}

.token-shadow__item {
  background: hsl(var(--color-surface-base));
  border: 1px solid hsl(var(--color-border-subtle) / 60%);
  border-radius: var(--radius-xl);
  display: grid;
  gap: var(--space-2xs);
  min-height: 8rem;
  padding: var(--space-md);
  place-content: center;
  text-align: center;
}

.token-shadow__item strong {
  font-size: 1.05rem;
}

.token-typography {
  display: grid;
  gap: var(--space-xl);
}

.token-typography__row {
  background: hsl(var(--color-surface-overlay) / 55%);
  border: 1px solid hsl(var(--color-border-subtle));
  border-radius: var(--radius-xl);
  display: grid;
  gap: var(--space-sm);
  padding: var(--space-lg);
}

.token-typography__specimen {
  font-weight: 600;
  margin: 0;
}

.token-typography__row aside {
  background: hsl(var(--color-surface-base));
  border: 1px solid hsl(var(--color-border-subtle) / 75%);
  border-radius: var(--radius-lg);
  padding: var(--space-sm);
}

.token-story__nav-preview > ul {
  display: grid;
  gap: var(--space-lg);
  list-style: none;
  margin: 0;
  padding: 0;
}

.token-story__nav-preview {
  background: hsl(var(--color-surface-base));
  border: 1px solid hsl(var(--color-border-subtle));
  border-radius: var(--radius-xl);
  padding: var(--space-lg);
}

.token-typography__row aside ul {
  display: grid;
  gap: 0.35rem;
  margin: 0;
  padding-left: var(--space-md);
}

.token-typography__row aside li {
  color: var(--color-ink-secondary);
}

.token-story__nav-preview strong {
  color: var(--color-ink-primary);
  font-size: 1.1rem;
}

.token-story__nav-preview li ul {
  display: grid;
  gap: var(--space-xs);
  margin-top: var(--space-sm);
  padding-left: var(--space-md);
}

.token-story__nav-preview a {
  color: hsl(var(--color-accent-brand));
  font-weight: 600;
}

.token-story__nav-preview p {
  color: var(--color-ink-secondary);
  margin: 0;
}

.token-list--inline {
  grid-auto-columns: minmax(12rem, 1fr);
  grid-auto-flow: column;
  overflow-x: auto;
}

.token-list--inline .token-list__item {
  align-items: center;
}

.token-list--inline input[type='radio'] {
  height: 1.25rem;
  width: 1.25rem;
}

.details-explainer {
  background: hsl(var(--color-surface-base) / 75%);
  border: 1px solid hsl(var(--color-border-subtle));
  border-radius: var(--radius-lg);
  padding: var(--space-md);
}

.details-explainer summary {
  cursor: pointer;
  font-weight: 600;
}

.details-explainer[open] summary {
  color: var(--color-accent-brand);
}

.visually-hidden {
  border: 0;
  clip-path: inset(50%);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

.theme-picker {
  border: 1px solid hsl(var(--color-border-subtle));
  border-radius: var(--radius-xl);
  display: grid;
  gap: var(--space-sm);
  padding: var(--space-md);
}

.theme-picker legend {
  color: var(--color-ink-primary);
  font-weight: 600;
}
